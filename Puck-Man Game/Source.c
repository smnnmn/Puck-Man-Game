#include <stdio.h>
#include <conio.h>
#include <Windows.h>

#define WIDTH 21
#define HEIGHT 21

#define UP 72
#define LEFT 75
#define RIGHT 77
#define DOWN 80


typedef struct Character
{
	int x;
	int y;
	const char* shape;
}Character;


void Position(int x, int y)
{
	// x와 y축을 설정하는 구조체입니다.
	COORD position = { x, y };

	// 콘솔 커서의 좌표를 설정하는 함수입니다.
	SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), position);
}

char maze[HEIGHT][WIDTH] =
{
	{'1','1','1','1','1','1','1','1','1','1','6','1','1','1','1','1','1','1','1','1','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','1','1','0','1','1','0','0','0','0','0','0','0','1'},
	{'6','0','0','0','0','0','0','0','1','0','2','0','1','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','1','0','0','0','1','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','1','1','1','1','1','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
	{'1','1','1','1','1','1','1','1','1','1','6','1','1','1','1','1','1','1','1','1','1'},
};

void Render()
{
	for (int i = 0; i < HEIGHT; i++)
	{
		for (int j = 0; j < WIDTH; j++)
		{
			switch (maze[i][j])
			{
				// 아무것도 없음
			case '0': printf("  "); break;
				// 아무도 나가지 못하는 벽
			case '1': printf("■"); break;
				// 플레이어가 먹어야할 코인
			case '2': printf("·"); break;
				// 플레이어가 먹으면 강화되는 아이템
			case '3': printf("⊙"); break;
				// 생성되는 출구
			case'4': printf("★"); break;
				// 적 기지의 입구
			case '5': printf("□"); break;
				//막혀있는 통로
			case '6': printf("◆"); break;
			}
		}
		printf("\n");
	}
}

void main()
{
	Character character = { 20,15,"●" };

	char key = 0;

	Render();

	while (1)
	{
		if (_kbhit())
		{
			key = _getch();
			
			if (key == -32)
			{
				key = _getch();
			}
			switch (key)
			{
			case UP:  if (maze[character.y - 1][character.x / 2] != '1')  character.y--;
				break;
			case LEFT: if (maze[character.y][character.x / 2 - 1] != '1') character.x -= 2;
				break;
			case RIGHT:if (maze[character.y][character.x / 2 + 1] != '1') character.x += 2;
				break;
			case DOWN: if (maze[character.y + 1][character.x / 2] != '1') character.y++;
				break;
			}
			system("cls");

			Render();
		}
		Position(character.x, character.y);
		printf("%s", character.shape);
		
	}
	return 0;
}